## Matplotlib

### 什么是matplolib？

```
Matplotlib是一个Python 2D绘图库，可以生成各种硬拷贝格式和跨平台交互式环境的出版物质量数据。Matplotlib可用于Python脚本，Python和IPython shell，Jupyter笔记本，Web应用程序服务器和四个图形用户界面工具包。

Matplotlib能够很方便的生成绘图，比如直方图，功率谱，条形图，误差图，散点图等。
```

### 如何在matplotlib中显示中文

```
from pylab import mpl

mpl.rcParams['font.sans-serif'] = ['FangSong'] # 指定默认字体
mpl.rcParams['axes.unicode_minus'] = False # 解决保存图像是负号'-'显示为方块的问题
```

### 相关组件

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809181959.png)

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809182000.png)

### 什么是Figure和Axes

```
Figure：整个画布对象。我们所有的绘图操作都是在Figure对象上操作的，不论是单个图表还是多子图

Axes：就是常说的具体的“一幅图”（），它是具有数据空间的图像区域
```

#### 演示

In[1]:

```
import numpy as np
import matplotlib.pyplot as plt
import math
from pylab import mpl

mpl.rcParams['font.sans-serif'] = ['FangSong'] # 指定默认字体
mpl.rcParams['axes.unicode_minus'] = False # 解决保存图像是负号'-'显示为方块的问题

# 创建数据集
x = np.linspace(0,3,100)

# 绘制三条线
plt.plot(x,x,label='线性')
plt.plot(x,x**2,label='平方')
plt.plot(x,x**3,label='立方')

# 设置x轴和y轴名称
plt.xlabel('x轴')
plt.ylabel('y轴')

# 设置标题名称
plt.title('简单绘图')

# 显示legend
plt.legend()
plt.show()
```

Out[1]:

![](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809170351.png)

### 多子图

In[1]:

```
import numpy as np
import matplotlib.pyplot as plt
```

#### 第一种方式

In [2]:

```
fig = plt.figure(figsize=(12,4)) # figsize 用来设置图的大小
ax1 = fig.add_subplot(1,3,1) # 添加子图，参数含义为位置（x,y）以及第几张图
ax2 = fig.add_subplot(1,3,2)
ax3 = fig.add_subplot(1,3,3)

ax1.plot([1,2,3])
ax2.plot([3,2,1])
ax3.plot([2,2,2])

plt.show()
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809182153)

In [3]:

```
fig = plt.figure(figsize=(12,4)) # figsize 用来设置图的大小
ax1 = fig.add_subplot(1,3,2)     # 添加子图，参数含义为位置（x,y）
                                 # 以及第几张图即图的位置以及顺序
ax2 = fig.add_subplot(1,3,3)
ax3 = fig.add_subplot(1,3,1)

ax1.plot([1,2,3])
ax2.plot([3,2,1])
ax3.plot([2,2,2])

plt.show()
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809182154)

#### 第二种方式

In [4]:

```
fig2,axes= plt.subplots(1,3,figsize=(12,4))

axes[0].plot([1,2,3]) # 通过axes数组直接进行分部图形位置
axes[1].plot([3,2,1])
axes[2].plot([2,2,2])

plt.show()
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809182155)

- 如果axes是多维对象，则需要传入多个坐标

In [5]:

```
fig3,axes = plt.subplots(2,3,figsize=(12,4)) # 创建一个2x3的图布

axes[0,0].plot([1,2,3]) # 传入数值，进行绘画
axes[0,1].plot([3,2,1])
axes[0,2].plot([2,2,2])

plt.show()
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/机器学习&深度学习/20200809182156.png)

#### 第三种方式

> 由于不推荐，就不进行学习了

### 线形图

```
matplotlib.pyplot.plot(*args, scalex=True, scaley=True, data=None, kwargs)
```

#### 传数据的两种方式

In[1]:

```
matplotlib.pyplot.plot(*args, scalex=True, scaley=True, data=None, kwargs)
```

In [2]:

```
import matplotlib.pyplot as plt
fig,axes = plt.subplots()

axes.plot([1,2,3,4])

plt.show()
```

In [3]:

```
figure,axes = plt.subplots()

data = {
    'a':[1,2,3],
    'b':[3,2,1]
}

axes.plot('a','b',data=data)

plt.show()
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809190949.png)

#### 绘制多条线

In [4]:

```
figure,axes = plt.subplots()

data = {
    'a':[1,2,3],
    'b':[3,2,1]
}

axes.plot('a','b',data=data)
axes.plot([1,2,3,4])

plt.show()
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809190945.png)

#### 其他设置

##### 1.颜色设置--color

```
可选值： 'b' blue 'g' green 'r' red 'c' cyan 'm' magenta 'y' yellow 'k' black 'w' white
```

In [5]:

```
figure,axes = plt.subplots()

axes.plot([1,2,3,4,5,6],color='r',drawstyle='steps')

plt.show()
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809190942.png)

##### 2.线性设置--linestyle

```
可选值：['solid' | 'dashed', 'dashdot', 'dotted' | (offset, on-off-dash-seq) | '-' | '--' | '-.' | ':' | 'None' | ' ' | '']
```

In [6]:

```
figure,axes = plt.subplots()

axes.plot([1,2,3,4,5,6],linestyle='-.')

plt.show()
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809190937.png)

##### 3.drawstyle

```
可选值：['default' | 'steps' | 'steps-pre' | 'steps-mid' | 'steps-post']
```

In [7]:

```
figure,axes = plt.subplots()

axes.plot([1,2,3,4],color='r',drawstyle='steps')

plt.show()
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809190935.png)

##### 4.标记--marker

```
可选值：'.' point marker 
        ',' pixel marker 
        'o' circle marker 
        'v' triangle_down marker
        '^' triangle_up marker
        '<' triangle_left marker 
        '>' triangle_right marker 
        '1' tri_down marker
        '2' tri_up marker 
        '3' tri_left marker 
        '4' tri_right marker
        's' square marker 
        'p' pentagon marker 
        '*' star marker
        'h' hexagon1 marker 
        'H' hexagon2 marker 
        '+' plus marker 
        'x' x marker 
        'D' diamond marker 
        'd' thindiamond marker 
        '|' vline marker 
        ``''`` hline marker
```

In [8]:

```
figure,axes = plt.subplots()

axes.plot([1,2,3,4,5,6],marker='o')

plt.show()
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809190928.png)

### 坐标轴刻度

In [1]:

```
import numpy as np
import matplotlib.pyplot as plt
```

#### 设置坐标轴上下限

In [2]:

```
x = np.linspace(0,15,100)

plt.plot(x,np.sin(x))
plt.xlim(0,12) # x轴刻度
plt.ylim(-2,2) # y轴刻度

plt.show()
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809211223.png)

- 坐标轴设置为倒序

In [3]:

```
x = np.linspace(0,10,100)

plt.plot(x,np.sin(x))
plt.xlim(12,0)
plt.ylim(2,-2)

plt.show()
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809211224.png)

#### 自定义刻度

In [4]:

```
plt.plot(np.linspace(-40,1,800))

# 设置x轴与y轴的刻度，rotation为旋转的度数，fontsize为字体的大小

plt.xticks([0,200,400,600,800],rotation=30 ,fontsize='large')
plt.yticks([-40,-30,-20,-10,0],rotation=30,fontsize='small')
```

Out[4]:

```
([<matplotlib.axis.YTick at 0x2997d645508>,
  <matplotlib.axis.YTick at 0x2997d644b88>,
  <matplotlib.axis.YTick at 0x2997d63f8c8>,
  <matplotlib.axis.YTick at 0x2997d66b988>,
  <matplotlib.axis.YTick at 0x2997d667308>],
 <a list of 5 Text yticklabel objects>)
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200809211225.png)

### 标题、轴标签以及图例

#### 演示

In [1]:

```
import numpy as np
import matplotlib.pyplot as plt

plt.rcParams['font.sans-serif'] = ['SimHei']  # 用来正常显示中文
plt.rcParams['axes.unicode_minus'] = False  # 用来正常显示负号
```

In [2]:

```
x = np.linspace(0,2,100)

plt.plot(x,np.sin(x),'-.g',label='sin(x)')
plt.plot(x,np.cos(x),':r',label='cos(x)')

plt.title("演示标题")
plt.xlabel('x轴')
plt.ylabel('sin or cos')

plt.legend()
```

Out[2]:

```
<matplotlib.legend.Legend at 0x1c2b8dc1dc8>
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200810121644.png)

#### 设置标题--title

```
fontsize：字体大小，默认12，也可以使用xx-small....字符串系列

fontweight：字体粗细，或者'light'、'normal'、'medium'、'semibold'、'bold'、'heavy'、'black'。

fontstyle： 字体类型，或者'normal'、'italic'、'oblique'。

verticalalignment：垂直对齐方式 ，或者'center'、'top'、'bottom'、'baseline'

horizontalalignment：水平对齐方式，可选参数：‘left’、‘right’、‘center’

rotation：旋转角度

alpha： 透明度，参数值0至1之间

backgroundcolor： 背景颜色

bbox：给标题增加外框 ，常用参数如下：

boxstyle：方框外形

facecolor：(简写fc)背景颜色

edgecolor：(简写ec)边框线条颜色

edgewidth:边框线条大小
```

In [3]:

```
x = np.linspace(0,2,100)

plt.plot(x,np.sin(x),'-.r',label='sin(x)')

plt.title('演示标题',fontsize=16,fontweight='heavy')

plt.xlabel('x')
plt.ylabel('y')

plt.legend()
```

Out[3]:

```
<matplotlib.legend.Legend at 0x1c2b8e8ea48>
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200810121635.png)

#### 设置图例

```
loc：图例的位置,参数值分别为1,2,3,4代表四个方向
prop：字体参数
fontsize：字体大小
markerscale：图例标记与原始标记的相对大小
markerfirst：如果为True，则图例标记位于图例标签的左侧
numpoints：为线条图图例条目创建的标记点数
scatterpoints：为散点图图例条目创建的标记点数
scatteryoffsets：为散点图图例条目创建的标记的垂直偏移量
frameon：是否显示图例边框
fancybox：边框四个角是否有弧度
shadow：控制是否在图例后面画一个阴影
framealpha：图例边框的透明度
edgecolor：边框颜色
facecolor：背景色
ncol：设置图例分为n列展示
borderpad：图例边框的内边距
labelspacing：图例条目之间的垂直间距
handlelength：图例句柄的长度
handleheight：图例句柄的高度
handletextpad：图例句柄和文本之间的间距
borderaxespad：轴与图例边框之间的距离
columnspacing：列间距
title：图例的标题
```

In [4]:

```
lines = []
styles = ['-','-.','--',':']
x = np.linspace(0,1,100)

for i in range(4):
    lines += plt.plot(x,np.sin(x+np.pi*x),styles[i])
plt.axis('equal')

# 生成第一个图例
leg = plt.legend(lines[:2],['A','B'],loc=1,frameon=False)

# 生成第二个图例，但是第一个图例会被抹去
plt.legend(lines[2:],['C','D'],loc=4,frameon=False)

# gca方法获取当前坐标轴，再使用它的`add_artist`方法将第一个图例重新画上去
plt.gca().add_artist(leg)
```

Out[4]:

```
<matplotlib.legend.Legend at 0x1c2b8e8ee08>
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200810121645.png)

### 文本、箭头和注释

#### 演示

In [1]:

```
import numpy as np
import matplotlib.pyplot as plt

plt.rcParams['font.sans-serif'] = ['SimHei']  # 用来正常显示中文
plt.rcParams['axes.unicode_minus'] = False  # 用来正常显示负号
```

In [2]:

```
x = np.linspace(0,2,100)

plt.plot(x,np.sin(x),'-.g',label='sin(x)')
plt.plot(x,np.cos(x),':r',label='cos(x)')

plt.title("演示标题")
plt.xlabel('x轴')
plt.ylabel('sin or cos')

plt.legend()
```

Out[2]:

```
<matplotlib.legend.Legend at 0x21b4eff5208>
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200810205404.png)

#### 设置标题--title

```
fontsize：字体大小，默认12，也可以使用xx-small....字符串系列

fontweight：字体粗细，或者'light'、'normal'、'medium'、'semibold'、'bold'、'heavy'、'black'。

fontstyle： 字体类型，或者'normal'、'italic'、'oblique'。

verticalalignment：垂直对齐方式 ，或者'center'、'top'、'bottom'、'baseline'

horizontalalignment：水平对齐方式，可选参数：‘left’、‘right’、‘center’

rotation：旋转角度

alpha： 透明度，参数值0至1之间

backgroundcolor： 背景颜色

bbox：给标题增加外框 ，常用参数如下：

boxstyle：方框外形

facecolor：(简写fc)背景颜色

edgecolor：(简写ec)边框线条颜色

edgewidth:边框线条大小
```

In [3]:

```
x = np.linspace(0,2,100)

plt.plot(x,np.sin(x),'-.r',label='sin(x)')

plt.title('演示标题',fontsize=16,fontweight='heavy')

plt.xlabel('x')
plt.ylabel('y')

plt.legend()
```

Out[3]:

```
<matplotlib.legend.Legend at 0x21b4f7b0908>
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200810205405.png)

#### 设置图例

```
loc：图例的位置,参数值分别为1,2,3,4代表四个方向
prop：字体参数
fontsize：字体大小
markerscale：图例标记与原始标记的相对大小
markerfirst：如果为True，则图例标记位于图例标签的左侧
numpoints：为线条图图例条目创建的标记点数
scatterpoints：为散点图图例条目创建的标记点数
scatteryoffsets：为散点图图例条目创建的标记的垂直偏移量
frameon：是否显示图例边框
fancybox：边框四个角是否有弧度
shadow：控制是否在图例后面画一个阴影
framealpha：图例边框的透明度
edgecolor：边框颜色
facecolor：背景色
ncol：设置图例分为n列展示
borderpad：图例边框的内边距
labelspacing：图例条目之间的垂直间距
handlelength：图例句柄的长度
handleheight：图例句柄的高度
handletextpad：图例句柄和文本之间的间距
borderaxespad：轴与图例边框之间的距离
columnspacing：列间距
title：图例的标题
```

In [4]:

```
lines = []
styles = ['-','-.','--',':']
x = np.linspace(0,1,100)

for i in range(4):
    lines += plt.plot(x,np.sin(x+np.pi*x),styles[i])
plt.axis('equal')

# 生成第一个图例
leg = plt.legend(lines[:2],['A','B'],loc=1,frameon=False)

# 生成第二个图例，但是第一个图例会被抹去
plt.legend(lines[2:],['C','D'],loc=4,frameon=False)

# gca方法获取当前坐标轴，再使用它的`add_artist`方法将第一个图例重新画上去
plt.gca().add_artist(leg)
```

Out[4]:

```
<matplotlib.legend.Legend at 0x21b4f850f88>
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200810205406.png)

#### 文本

```
class matplotlib.text.Annotation(text, xy, xytext=None, xycoords='data', textcoords=None, arrowprops=None, annotation_clip=None, kwargs)
```

In [5]:

```
x = np.linspace(0,20,100)
plt.plot(x,np.sin(x))
# 11和0.6表示文本出现的(x,y)位置，ha以及va分别为水平和垂直方向
plt.text(11,0.6,'the sin(x)',ha='center',va='center')
```

Out[5]:

```
Text(11, 0.6, 'the sin(x)')
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200810205407.png)

#### 箭头和注释

```
matplotlib.pyplot.annotate(s, xy, *args, kwargs)

主要参数：
        s：注释文本内容
        xy：被注释对象的坐标位置，实际上就是图中箭头的箭锋位置
        xytext： 具体注释文字的坐标位置
        xycoords：被注释对象使用的参考坐标系
        extcoords：注释文字的偏移量
        arrowprops：可选，增加注释箭头
        width：箭头宽度，以点为单位
        frac：箭头头部所占据的比例
        headwidth：箭头底部的宽度，以点为单位
        shrink：移动提示，并使其离注释点和文本一些距离
```

In [6]:

```
figure,axes = plt.subplots()

x = np.linspace(0,20,1000)
axes.plot(x,np.cos(x),'-.r')
axes.axis('equal')

# facecolor参数修改箭头颜色，shrink参数越小箭头长度越长

axes.annotate('极大值',xy=(6.28,1.2),xytext=(10,5),
             arrowprops=dict(facecolor='blue',shrink=0.05))

# arrowstyle指定箭头形状
axes.annotate('极小值',xy=(5*np.pi,-1),xytext=(10,-6),
             arrowprops=dict(arrowstyle='->',connectionstyle='angle3,angleA=0,angleB=-90'))

```

Out[6]:

```
Text(10, -6, '极小值')
```

![img](https://cdn.jsdelivr.net/gh/CoderAngle/notebook-picgo@master/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20200810205408.png)

### 条形图



### 直方图



### 饼图



### 散点图



### 等高线



### 箱线图

